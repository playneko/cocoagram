import{d as A,at as B,r as l,a2 as I,t as u,v as d,a4 as t,z as o,ab as V,x as f,aJ as x,A as b,ac as N,B as P,S as T,ad as w,a1 as h,q as $}from"./zaMRx6L0.js";import{V as k}from"./DhbZxorU.js";import{V as D,a as E}from"./TAEueXk-.js";const z={class:"profile-overflow-modify"},F={key:0,class:"d-flex profile-margin"},O={key:1,class:"profile-margin"},R={key:2,class:"profile-margin"},U={class:"text-center"},G=A({__name:"modify",async setup(j){let v,g;const{account:_}=B(),y=$(),i=l(!1),c=l(!1),p=l(!1),r=l(null),s=l(),n=l(),C=async()=>{i.value=!0;const e=new FormData;e.append("uid",_.value.uid),e.append("content",n.value),e.append("files",s.value);const{data:a}=await w("item",()=>$fetch(`${y.public.apiCocoaProfileSave}`,{method:"POST",body:e}));h(a.value)?(r.value="システムエラーが発生しました。",c.value=!0,i.value=!1):(i.value=!1,c.value=!1,r.value=null,a.value.success?(s.value=null,p.value=!0):(r.value="システムエラーが発生しました。",c.value=!0))},S=async()=>{const{data:e}=await w("item",()=>$fetch(`${y.public.apiCocoaProfileInfo}`,{method:"POST",body:{uid:_.value.uid}}));h(e.value)||e.value.success&&(n.value=e.value.rows.content)};return[v,g]=I(()=>S()),await v,g(),(e,a)=>(u(),d("div",z,[t(c)?(u(),d("div",F,[o(k,{density:"compact",text:t(r),title:"エラー",type:"error",class:"profile-alert_message"},null,8,["text"])])):V("",!0),t(p)?(u(),d("div",O,[o(k,{density:"compact",text:"プロフィール修正成功",title:"成功",type:"success",class:"profile-alert_message"})])):t(p)?V("",!0):(u(),d("div",R,[f("div",null,[o(D,{modelValue:t(s),"onUpdate:modelValue":a[0]||(a[0]=m=>x(s)?s.value=m:null),label:"画像",accept:"image/png, image/jpeg, image/bmp",placeholder:"画像を選択してください。","prepend-icon":"mdi-camera"},null,8,["modelValue"])]),f("div",null,[o(E,{label:"プロフィル内容",color:"brown-darken-1","bg-color":"grey-lighten-2",modelValue:t(n),"onUpdate:modelValue":a[1]||(a[1]=m=>x(n)?n.value=m:null)},null,8,["modelValue"])]),f("div",U,[o(T,{size:"large",variant:"flat",color:"brown-darken-1","prepend-icon":"mdi-account-edit",onClick:C,loading:t(i)},{prepend:b(()=>[o(N,{color:"white"})]),default:b(()=>[a[2]||(a[2]=P(" プロフィール修正 "))]),_:1},8,["loading"])])]))]))}});export{G as default};
