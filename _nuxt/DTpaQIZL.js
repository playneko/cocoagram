import{J as Q,ah as Pe,i as T,r as S,ai as K,aj as We,W as J,ak as Ze,al as te,o as Ae,am as Ke,an as Je,ao as _e,ap as oe,aq as he,M as le,ar as Xe,as as se,P as Y,z as n,at as ie,au as Ge,m as X,av as Qe,aw as Ye,F as Re,B as U,O as et,ax as Ve,S as E,ay as Ie,az as tt,d as ee,$ as at,t as C,ae as F,A as _,a4 as r,v as M,Q as ue,a3 as ce,aA as nt,Z as G,x as k,aB as ot,y as B,ab as D,aC as lt,aa as st,a6 as ke,aD as ae,aE as Oe,aF as ne,ac as ye,ag as it,aG as ut,ad as q,a1 as A,q as re,aH as Fe,aI as He,af as Be,aJ as Le,a5 as ct,aK as rt,aL as dt,a2 as vt,aM as Te,aN as ft}from"./zaMRx6L0.js";import{V as mt}from"./DhbZxorU.js";import{V as pt,a as yt}from"./TAEueXk-.js";const ge=Symbol.for("vuetify:layout"),gt=Symbol.for("vuetify:layout-item"),Me=1e3,_t=Q({overlaps:{type:Array,default:()=>[]},fullHeight:Boolean},"layout");function ht(){const e=Pe(ge);if(!e)throw new Error("[Vuetify] Could not find injected layout");return{getLayoutItem:e.getLayoutItem,mainRect:e.mainRect,mainStyles:e.mainStyles}}const kt=(e,f,t,d)=>{let a={top:0,left:0,right:0,bottom:0};const o=[{id:"",layer:{...a}}];for(const l of e){const s=f.get(l),v=t.get(l),h=d.get(l);if(!s||!v||!h)continue;const I={...a,[s.value]:parseInt(a[s.value],10)+(h.value?parseInt(v.value,10):0)};o.push({id:l,layer:I}),a=I}return o};function Ct(e){const f=Pe(ge,null),t=T(()=>f?f.rootZIndex.value-100:Me),d=S([]),a=K(new Map),o=K(new Map),l=K(new Map),s=K(new Map),v=K(new Map),{resizeRef:h,contentRect:I}=We(),L=T(()=>{const u=new Map,$=e.overlaps??[];for(const c of $.filter(w=>w.includes(":"))){const[w,V]=c.split(":");if(!d.value.includes(w)||!d.value.includes(V))continue;const P=a.get(w),O=a.get(V),N=o.get(w),W=o.get(V);!P||!O||!N||!W||(u.set(V,{position:P.value,amount:parseInt(N.value,10)}),u.set(w,{position:O.value,amount:-parseInt(W.value,10)}))}return u}),x=T(()=>{const u=[...new Set([...l.values()].map(c=>c.value))].sort((c,w)=>c-w),$=[];for(const c of u){const w=d.value.filter(V=>{var P;return((P=l.get(V))==null?void 0:P.value)===c});$.push(...w)}return kt($,a,o,s)}),b=T(()=>!Array.from(v.values()).some(u=>u.value)),p=T(()=>x.value[x.value.length-1].layer),i=T(()=>({"--v-layout-left":J(p.value.left),"--v-layout-right":J(p.value.right),"--v-layout-top":J(p.value.top),"--v-layout-bottom":J(p.value.bottom),...b.value?void 0:{transition:"none"}})),y=T(()=>x.value.slice(1).map((u,$)=>{let{id:c}=u;const{layer:w}=x.value[$],V=o.get(c),P=a.get(c);return{id:c,...w,size:Number(V.value),position:P.value}})),m=u=>y.value.find($=>$.id===u),z=Ze("createLayout"),R=te(!1);Ae(()=>{R.value=!0}),Ke(ge,{register:(u,$)=>{let{id:c,order:w,position:V,layoutSize:P,elementSize:O,active:N,disableTransitions:W,absolute:Ne}=$;l.set(c,w),a.set(c,V),o.set(c,P),s.set(c,N),W&&v.set(c,W);const Se=Je(gt,z==null?void 0:z.vnode).indexOf(u);Se>-1?d.value.splice(Se,0,c):d.value.push(c);const $e=T(()=>y.value.findIndex(Z=>Z.id===c)),ve=T(()=>t.value+x.value.length*2-$e.value*2),Ue=T(()=>{const Z=V.value==="left"||V.value==="right",fe=V.value==="right",qe=V.value==="bottom",me=O.value??P.value,je=me===0?"%":"px",we={[V.value]:0,zIndex:ve.value,transform:`translate${Z?"X":"Y"}(${(N.value?0:-(me===0?100:me))*(fe||qe?-1:1)}${je})`,position:Ne.value||t.value!==Me?"absolute":"fixed",...b.value?void 0:{transition:"none"}};if(!R.value)return we;const H=y.value[$e.value];if(!H)throw new Error(`[Vuetify] Could not find layout item "${c}"`);const pe=L.value.get(c);return pe&&(H[pe.position]+=pe.amount),{...we,height:Z?`calc(100% - ${H.top}px - ${H.bottom}px)`:O.value?`${O.value}px`:void 0,left:fe?void 0:`${H.left}px`,right:fe?`${H.right}px`:void 0,top:V.value!=="bottom"?`${H.top}px`:void 0,bottom:V.value!=="top"?`${H.bottom}px`:void 0,width:Z?O.value?`${O.value}px`:void 0:`calc(100% - ${H.left}px - ${H.right}px)`}}),Ee=T(()=>({zIndex:ve.value-1}));return{layoutItemStyles:Ue,layoutItemScrimStyles:Ee,zIndex:ve}},unregister:u=>{l.delete(u),a.delete(u),o.delete(u),s.delete(u),v.delete(u),d.value=d.value.filter($=>$!==u)},mainRect:p,mainStyles:i,getLayoutItem:m,items:y,layoutRect:I,rootZIndex:t});const de=T(()=>["v-layout",{"v-layout--full-height":e.fullHeight}]),g=T(()=>({zIndex:f?t.value:void 0,position:f?"relative":void 0,overflow:f?"hidden":void 0}));return{layoutClasses:de,layoutStyles:g,getLayoutItem:m,items:y,layoutRect:I,layoutRef:h}}const bt=Q({fluid:{type:Boolean,default:!1},..._e(),...oe(),...he()},"VContainer"),De=le()({name:"VContainer",props:bt(),setup(e,f){let{slots:t}=f;const{rtlClasses:d}=Xe(),{dimensionStyles:a}=se(e);return Y(()=>n(e.tag,{class:["v-container",{"v-container--fluid":e.fluid},d.value,e.class],style:[a.value,e.style]},t)),{}}}),{setAccount:xt,account:sa}=ie(),j=async()=>{const e=Ge("authUserInfo");return xt(null),e.value=null,await X("/error",{replace:!0})},St=Q({color:String,direction:{type:String,default:"vertical",validator:e=>["vertical","horizontal"].includes(e)},side:{type:String,default:"end",validator:e=>["start","end","both"].includes(e)},mode:{type:String,default:"intersect",validator:e=>["intersect","manual"].includes(e)},margin:[Number,String],loadMoreText:{type:String,default:"$vuetify.infiniteScroll.loadMore"},emptyText:{type:String,default:"$vuetify.infiniteScroll.empty"},...oe(),...he()},"VInfiniteScroll"),ze=Qe({name:"VInfiniteScrollIntersect",props:{side:{type:String,required:!0},rootMargin:String},emits:{intersect:(e,f)=>!0},setup(e,f){let{emit:t}=f;const{intersectionRef:d,isIntersecting:a}=Ye();return Re(a,async o=>{t("intersect",e.side,o)}),Y(()=>n("div",{class:"v-infinite-scroll-intersect",style:{"--v-infinite-margin-size":e.rootMargin},ref:d},[U(" ")])),{}}}),Ce=le()({name:"VInfiniteScroll",props:St(),emits:{load:e=>!0},setup(e,f){let{slots:t,emit:d}=f;const a=S(),o=te("ok"),l=te("ok"),s=T(()=>J(e.margin)),v=te(!1);function h(g){if(!a.value)return;const u=e.direction==="vertical"?"scrollTop":"scrollLeft";a.value[u]=g}function I(){if(!a.value)return 0;const g=e.direction==="vertical"?"scrollTop":"scrollLeft";return a.value[g]}function L(){if(!a.value)return 0;const g=e.direction==="vertical"?"scrollHeight":"scrollWidth";return a.value[g]}function x(){if(!a.value)return 0;const g=e.direction==="vertical"?"clientHeight":"clientWidth";return a.value[g]}Ae(()=>{a.value&&(e.side==="start"?h(L()):e.side==="both"&&h(L()/2-x()/2))});function b(g,u){g==="start"?o.value=u:g==="end"&&(l.value=u)}function p(g){return g==="start"?o.value:l.value}let i=0;function y(g,u){v.value=u,v.value&&m(g)}function m(g){if(e.mode!=="manual"&&!v.value)return;const u=p(g);if(!a.value||["empty","loading"].includes(u))return;i=L(),b(g,"loading");function $(c){b(g,c),Ie(()=>{c==="empty"||c==="error"||(c==="ok"&&g==="start"&&h(L()-i+I()),e.mode!=="manual"&&Ie(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{m(g)})})})}))})}d("load",{side:g,done:$})}const{t:z}=et();function R(g,u){var w,V,P,O,N;if(e.side!==g&&e.side!=="both")return;const $=()=>m(g),c={side:g,props:{onClick:$,color:e.color}};return u==="error"?(w=t.error)==null?void 0:w.call(t,c):u==="empty"?((V=t.empty)==null?void 0:V.call(t,c))??n("div",null,[z(e.emptyText)]):e.mode==="manual"?u==="loading"?((P=t.loading)==null?void 0:P.call(t,c))??n(Ve,{indeterminate:!0,color:e.color},null):((O=t["load-more"])==null?void 0:O.call(t,c))??n(E,{variant:"outlined",color:e.color,onClick:$},{default:()=>[z(e.loadMoreText)]}):((N=t.loading)==null?void 0:N.call(t,c))??n(Ve,{indeterminate:!0,color:e.color},null)}const{dimensionStyles:de}=se(e);Y(()=>{const g=e.tag,u=e.side==="start"||e.side==="both",$=e.side==="end"||e.side==="both",c=e.mode==="intersect";return n(g,{ref:a,class:["v-infinite-scroll",`v-infinite-scroll--${e.direction}`,{"v-infinite-scroll--start":u,"v-infinite-scroll--end":$}],style:de.value},{default:()=>{var w;return[n("div",{class:"v-infinite-scroll__side"},[R("start",o.value)]),u&&c&&n(ze,{key:"start",side:"start",onIntersect:y,rootMargin:s.value},null),(w=t.default)==null?void 0:w.call(t),$&&c&&n(ze,{key:"end",side:"end",onIntersect:y,rootMargin:s.value},null),n("div",{class:"v-infinite-scroll__side"},[R("end",l.value)])]}})})}}),$t=Q({..._e(),...oe(),..._t()},"VLayout"),be=le()({name:"VLayout",props:$t(),setup(e,f){let{slots:t}=f;const{layoutClasses:d,layoutStyles:a,getLayoutItem:o,items:l,layoutRef:s}=Ct(e),{dimensionStyles:v}=se(e);return Y(()=>{var h;return n("div",{ref:s,class:[d.value,e.class],style:[v.value,a.value,e.style]},[(h=t.default)==null?void 0:h.call(t)])}),{getLayoutItem:o,items:l}}}),wt=Q({scrollable:Boolean,..._e(),...oe(),...he({tag:"main"})},"VMain"),xe=le()({name:"VMain",props:wt(),setup(e,f){let{slots:t}=f;const{dimensionStyles:d}=se(e),{mainStyles:a}=ht(),{ssrBootStyles:o}=tt();return Y(()=>n(e.tag,{class:["v-main",{"v-main--scrollable":e.scrollable},e.class],style:[a.value,o.value,d.value,e.style]},{default:()=>{var l,s;return[e.scrollable?n("div",{class:"v-main__scroller"},[(l=t.default)==null?void 0:l.call(t)]):(s=t.default)==null?void 0:s.call(t)]}})),{}}}),Vt={class:"home-div-flex"},It={key:0},Lt={key:0},Tt={key:1,class:"home-like-font-bold"},Mt={key:2},zt=["onClick"],Pt=["onClick"],At={class:"home-global-color"},Rt=ee({__name:"Home",setup(e){const{setIsComment:f,setCommentNo:t,setCommentCount:d}=at(),{account:a}=ie(),o=re(),l=S([]),s=S(-1),v=S(1),h=S(!0),I=i=>{s.value=i},L=(i,y)=>{d(),f(i),t(y)},x=async(i,y)=>{if(ut(l.value,y)>0){const{data:m}=await q("item",()=>$fetch(`${o.public.apiCocoaLikeUp}`,{method:"POST",body:{sid:y,uid:a.value.uid}}));A(m.value)||m.value.success&&(l.value[i].isLike=1)}},b=async i=>{await X(`/detail/${i}`)},p=async({done:i})=>{if(h.value){const{data:y}=await q("item",()=>$fetch(`${o.public.apiCocoaStoryList}`,{method:"POST",body:{uid:a.value.uid,pagenum:v.value}}));A(y.value)?j():(v.value=v.value+1,h.value=y.value.scroll>0,y.value.success&&!A(y.value.rows)?l.value.push(...y.value.rows):y.value.success?h.value=!1:j())}i("ok")};return(i,y)=>(C(),F(be,{class:"mx-auto home-non-display","max-width":"100%"},{default:_(()=>[n(Ce,{items:r(l),onLoad:p,class:"home-loading-center home-margin-top"},{default:_(()=>[(C(!0),M(ue,null,ce(r(l),(m,z)=>(C(),F(xe,{key:z},{default:_(()=>[n(nt,{class:"home-title-name",density:"compact",title:m.s_name,variant:"text","prepend-avatar":m.s_photo},{default:_(()=>[n(G,{src:m.filename,cover:"",onClick:R=>b(m.no)},null,8,["src","onClick"]),k("div",Vt,[n(E,{icon:m.isLike>0?"mdi-heart":"mdi-heart-outline",class:ot(m.isLike>0?"home-like-font-color":""),variant:"text",onClick:R=>x(z,m.no)},null,8,["icon","class","onClick"]),k("div",null,[n(E,{icon:"mdi-message-outline",variant:"text",onClick:R=>L(!0,m.no)},null,8,["onClick"]),m.comment_cnt>0?(C(),M("span",It,"+"+B(m.comment_cnt),1)):D("",!0)]),n(lt),n(E,{icon:"mdi-link-variant",variant:"text"})]),n(st,null,{default:_(()=>[m.like_cnt>0?(C(),M("div",Lt,[m.like_cnt>1?(C(),F(ke,{key:0,size:"20",class:"home-avatar-right"},{default:_(()=>[n(G,{src:m.l_photo},null,8,["src"])]),_:2},1024)):D("",!0),m.like_cnt>1?(C(),M("span",Tt,B(m.l_name),1)):D("",!0),m.like_cnt>1?(C(),M("span",Mt,"他が ")):D("",!0),y[1]||(y[1]=U(" 「いいね！」 しました "))])):D("",!0),ae(k("div",null,[U(B(r(Oe)(m.content))+" ",1),k("span",{class:"home-global-color",onClick:R=>I(z)},"続きを読む",8,zt)],512),[[ne,r(s)!==z]]),ae(k("div",null,[U(B(m.content)+" ",1),k("span",{class:"home-global-color",onClick:y[0]||(y[0]=R=>I(-1))},"読み返す")],512),[[ne,r(s)===z]]),k("div",{class:"home-global-color",onClick:R=>L(!0,m.no)}," コメントをすべて見る ",8,Pt),k("div",At,[n(ye,{icon:"mdi-clock",start:""}),U(" "+B(r(it)(m.createdAt)),1)])]),_:2},1024)]),_:2},1032,["title","prepend-avatar"])]),_:2},1024))),128))]),_:1},8,["items"])]),_:1}))}}),Ot=ee({__name:"Compass",setup(e){const f=re(),t=S([]),d=S(1),a=S(!0),o=async s=>{await X(`/detail/${s}`)},l=async({done:s})=>{if(a.value){const{data:v}=await q("item",()=>$fetch(`${f.public.apiCocoaCompassList}`,{method:"POST",body:{pagenum:d.value}}));A(v.value)?j():(d.value=d.value+1,a.value=v.value.scroll>0,v.value.success&&!A(v.value.rows)?t.value.push(...v.value.rows):v.value.success?a.value=!1:j())}s("ok")};return(s,v)=>(C(),F(be,{class:"mx-auto","max-width":"100%"},{default:_(()=>[n(Ce,{items:r(t),onLoad:l,class:"compass-loading-center compass-margin-top",width:"100%"},{default:_(()=>[n(xe,null,{default:_(()=>[n(De,{fluid:"",class:"compass-container_npd"},{default:_(()=>[n(Fe,{dense:""},{default:_(()=>[(C(!0),M(ue,null,ce(r(t),(h,I)=>(C(),F(He,{key:I,cols:"4",class:"compass-col_npd"},{default:_(()=>[n(Be,{color:"grey-lighten-2",class:"compass-radius"},{default:_(()=>[n(G,{src:h.filename,cover:"",onClick:L=>o(h.no),class:"compass-img-height"},null,8,["src","onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["items"])]),_:1}))}}),Ft={class:"upload-overflow"},Ht={key:0,class:"upload-alert_position"},Bt={key:1,class:"upload-content"},Dt={key:2,class:"text-center upload-btn"},Nt=ee({__name:"Upload",setup(e){const{account:f}=ie(),t=re(),d=S(!1),a=S(!1),o=S(null),l=S([]),s=S([]),v=S(),h=S(0),I=x=>{s.value.splice(x,1)},L=async()=>{d.value=!0;const x=new FormData;x.append("uid",f.value.uid),x.append("content",v.value);for(var b=0;b<s.value.length;b++)x.append("fileArray",s.value[b]);const{data:p}=await q("item",()=>$fetch(`${t.public.apiCocoaUploadImage}`,{method:"POST",body:x}));A(p.value)?(o.value="システムエラーが発生しました。",a.value=!0,d.value=!1):(d.value=!1,a.value=!1,o.value=null,p.value.success?(l.value=[],s.value=[],v.value=null,h.value=0):(o.value="システムエラーが発生しました。",a.value=!0))};return Re([l,h],x=>{if(!A(l.value.name)){const b=x[0];dt(s.value,b)&&s.value.push(b),l.value=[],h.value++}}),(x,b)=>(C(),M("div",Ft,[r(a)?(C(),M("div",Ht,[n(mt,{density:"compact",text:r(o),title:"エラー",type:"error",class:"upload-alert_message"},null,8,["text"])])):D("",!0),n(pt,{modelValue:r(l),"onUpdate:modelValue":b[0]||(b[0]=p=>Le(l)?l.value=p:null),label:"ファイル添付",class:"upload-input","prepend-icon":"mdi-camera",accept:"image/png, image/jpeg, image/bmp, image/gif, image/webp, image/avif, image/heic, image/*"},null,8,["modelValue"]),r(A)(r(s))?D("",!0):(C(),M("div",Bt,[n(yt,{modelValue:r(v),"onUpdate:modelValue":b[1]||(b[1]=p=>Le(v)?v.value=p:null),label:"内容",class:"upload-input",color:"brown-darken-1","bg-color":"grey-lighten-2"},null,8,["modelValue"]),n(rt,{lines:"two"},{default:_(()=>[(C(!0),M(ue,null,ce(r(s),(p,i)=>(C(),F(ct,{key:p.name,subtitle:p.name,title:p.type},{prepend:_(()=>[n(ke,null,{default:_(()=>[n(ye,{icon:"mdi-file-image"})]),_:1})]),append:_(()=>[n(E,{icon:"mdi-close",size:"x-small",color:"brown-darken-1",onClick:y=>I(i)},null,8,["onClick"])]),_:2},1032,["subtitle","title"]))),128))]),_:1})])),r(A)(r(s))?D("",!0):(C(),M("div",Dt,[n(E,{size:"x-large",variant:"flat",color:"brown-darken-1","prepend-icon":"mdi-cloud-upload",onClick:L,loading:r(d)},{prepend:_(()=>[n(ye,{color:"white"})]),default:_(()=>[b[2]||(b[2]=U(" アップロード "))]),_:1},8,["loading"])]))]))}}),Ut={class:"profile-overflow"},Et={class:"d-flex profile-margin"},qt={class:"profile-text"},jt={class:"profile-text-style"},Wt={class:"profile-text"},Zt={class:"profile-text-style"},Kt={class:"profile-text"},Jt={class:"profile-text-style"},Xt={class:"profile-top profile-name"},Gt={class:"profile-content"},Qt=["innerHTML"],Yt={class:"profile-content"},ea=["innerHTML"],ta=ee({__name:"Profile",async setup(e){let f,t;const{account:d}=ie(),a=re(),o=S({}),l=S([]),s=S(1),v=S(-1),h=S(!0),I=p=>{v.value=p},L=async(p,i)=>{i===1?await X(`/detail/${p}`):i===2&&await X("/member/modify")},x=async()=>{const{data:p}=await q("item",()=>$fetch(`${a.public.apiCocoaProfileInfo}`,{method:"POST",body:{uid:d.value.uid}}));A(p.value)||p.value.success&&(o.value=p.value.rows)},b=async({done:p})=>{if(h.value){const{data:i}=await q("item",()=>$fetch(`${a.public.apiCocoaProfileList}`,{method:"POST",body:{uid:d.value.uid,pagenum:s.value}}));A(i.value)?j():(s.value=s.value+1,h.value=i.value.scroll>0,i.value.success&&!A(i.value.rows)?l.value.push(...i.value.rows):i.value.success?h.value=!1:j())}p("ok")};return[f,t]=vt(()=>x()),await f,t(),(p,i)=>(C(),M("div",Ut,[k("div",Et,[n(ke,{size:"100"},{default:_(()=>[n(G,{src:r(o).photoURL,onClick:i[0]||(i[0]=y=>L(0,2))},null,8,["src"])]),_:1}),k("div",qt,[k("div",jt,B(r(o).story_cnt),1),i[2]||(i[2]=k("div",{class:"text-center"},"投稿",-1))]),k("div",Wt,[k("div",Zt,B(r(o).like_cnt),1),i[3]||(i[3]=k("div",{class:"text-center"},"いいね",-1))]),k("div",Kt,[k("div",Jt,B(r(o).comment_cnt),1),i[4]||(i[4]=k("div",{class:"text-center"},"コメント",-1))])]),k("div",Xt,B(r(o).displayName),1),ae(k("div",Gt,[k("div",{innerHTML:r(Oe)(r(Te)(r(o).content))},null,8,Qt),k("span",{onClick:i[1]||(i[1]=y=>I(1))},"続きを読む")],512),[[ne,r(v)!==1]]),ae(k("div",Yt,[k("div",{innerHTML:r(Te)(r(o).content)},null,8,ea)],512),[[ne,r(v)===1]]),k("div",null,[n(be,{class:"mx-auto","max-width":"100%"},{default:_(()=>[n(Ce,{items:r(l),onLoad:b,class:"profile-loading-center",width:"100%"},{default:_(()=>[n(xe,null,{default:_(()=>[n(De,{fluid:"",class:"profile-container_npd"},{default:_(()=>[n(Fe,{dense:""},{default:_(()=>[(C(!0),M(ue,null,ce(r(l),(y,m)=>(C(),F(He,{key:m,cols:"4",class:"profile-col_npd"},{default:_(()=>[n(Be,{color:"grey-lighten-2",class:"profile-radius"},{default:_(()=>[n(G,{src:y.filename,cover:"",onClick:z=>L(y.no,1),class:"profile-img-height"},null,8,["src","onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["items"])]),_:1})])]))}}),ia=ee({__name:"index",setup(e){const{tabs:f}=ft();return(t,d)=>{const a=Rt,o=Ot,l=Nt,s=ta;return C(),M("div",null,[r(f)===1?(C(),F(a,{key:0})):r(f)===2?(C(),F(o,{key:1})):r(f)===3?(C(),F(l,{key:2})):r(f)===4?(C(),F(s,{key:3})):D("",!0)])}}});export{ia as default};
